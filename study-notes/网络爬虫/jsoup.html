<html>
<head>
  <title>jsoup</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602916 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2958"/>
<h1>jsoup</h1>

<div>
<span><div>jsoup是一款java的HTML解析器，可以直接解析某个URL地址，HTML文本内容。它提供了一套非常省力的API，可通过DOM，CSS以及类似于jQuery的操作方法来取出和操作数据。</div><div><br/></div><div>jsoup的主要功能如下：</div><div><span>    1、从一个URL，文件或者字符串中解析HTML。</span><br/></div><div><span><span>    2、使用DOM或者CSS选择器来查找，取出数据。</span><br/></span></div><div><span><span>    3、可操作HTML元素，属性，文本。</span><br/></span></div><div><br/></div><div><br/></div><div>加入JSoup依赖</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">&lt;dependency&gt;</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><span>    &lt;groupId&gt;org.jsoup&lt;/groupId&gt;</span><br/></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><span><span>    &lt;artifactId&gt;jsoup&lt;/artifactId&gt;</span><br/></span></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><span><span>    &lt;version&gt;1.10.3&lt;/version&gt;</span><br/></span></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">&lt;/dependency&gt;</span></div></div><div>加入处理文字和处理文件的工具类依赖</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;dependency&gt;</div><div>    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;</div><div>    &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;</div><div>    &lt;version&gt;3.3.2&lt;/version&gt;</div><div>&lt;/dependency&gt;</div><div>&lt;dependency&gt;</div><div>    &lt;groupId&gt;commons-io&lt;/groupId&gt;</div><div>    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;</div><div>    &lt;version&gt;2.6&lt;/version&gt;</div><div>&lt;/dependency&gt;</div></div><div>jsoup输入url</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>{</div><div><span>    </span>//解析url地址，第一个参数是需要解析的url，第二个参数是连接的超时时间</div><div><span>  Document dom=  Jsoup.parse(new URL(&quot;</span>https://www.baidu.com<span>&quot;),10000);</span><br/></div><div><span><span>    //获取页面信息，输出为html文件</span><br/></span></div><div><span>    FileUtils.writeStringToFile(new File(&quot;</span>C:\Users\爱德华\Desktop<span><span>&quot;),dom.html(),&quot;UTF-8&quot;);</span><br/></span></div><div><span><span>    //使用dom对象解析页面,获取title标签的内容</span><br/></span></div><div><span><span>    String string=dom.getElementsByTag(&quot;title&quot;).first().text();</span><br/></span></div><div><span><br/></span></div><div>}</div></div><div>jsoup输入字符串</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">//使用工具类，读取文件获取字符串</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><font face="Monaco"><span>   String html= </span>FileUtils.readFileToString(new File(&quot;&quot;),&quot;UTF-8&quot;);</font></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">//使用jsoup解析字符串</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><span>    Document dom=Jsoup.parse(html);</span><br/></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">//获取title标签的内容</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><span>    String title=dom.getElementsByTag(&quot;title&quot;).first().text();</span><br/></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div></div><div>jsoup解析文件</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">Document dom=Jsoup.parse(new File(&quot;</span>C:\Users\爱德华\Desktop<span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">&quot;),&quot;UTF-8&quot;)</span></div><div> </div><div> String title=dom.getElementsByTag(&quot;title&quot;).first().text();</div></div><div><br/></div><div><img src="jsoup_files/Image.png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>jsoup解析</div><div>一、dom方式遍历</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>String str=&quot;&quot;;</div><div>//元素获取</div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><b>//1、根据id查询元素getElementById</b></span></div><div><font face="Monaco">str=</font>dom.getElementsById(&quot;id值&quot;).text();</div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><b>//2、根据标签获取元素getElementsByTag</b></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">str=</span>dom.getElementsByTag(&quot;title&quot;).first().text();</div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><b>//3、根据class获取元素getElementsByClass</b></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">str=dom.getElementsByClass(&quot;&quot;).text();</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><b>//4、根据属性获取元素getElementsByAttribute</b></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">str=dom.getElementsByAttribute(&quot;&quot;).get(0).text();</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">str=dom.getElementsByAttributeValue(&quot;属性名&quot;,&quot;属性值&quot;).first().text();</span></div></div><div><br/></div><div><br/></div><div>元数据获取：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">String st=&quot;&quot;;</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">//1、从元素中获取id</span></div><div>st=dom.getElementsById(&quot;id值&quot;).id();</div><div>//2、从元素中获取className和classNames</div><div>st=dom.getElementsById(&quot;id值&quot;).className();</div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div>for(String string:dom.getElementsById(&quot;id值&quot;).classNames()){</div><div><span>    System.out.println(string);</span><br/></div><div>}</div><div>//3、从元素中获取属性的值attr</div><div>str=dom.getElementsById(&quot;id值&quot;).attr(&quot;属性名&quot;);</div><div>//4、从元素中获取所有属性attributes</div><div>Attributes attributes=dom.getElementsById(&quot;id值&quot;).attributes();</div><div>//5、从元素中获取文本内容text</div><div>str=dom.getElementsById(&quot;id值&quot;).text();</div><div>//6、从元素中获取html</div><div>str=dom.getElementsById(&quot;id值&quot;).html();</div></div><div>二、选择器语法</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">1、tagname：通过标签查找元素</font></div><div><font style="font-family: Monaco;">str=dom.select(&quot;title&quot;).first().text();</font></div><div><font face="Monaco">2、 ns|tag：通过标签在命名空间查找元素，比如：可以用fb|name语法来查找&lt;fb:name&gt;元素</font></div><div><font face="Monaco">str=</font>dom.select(&quot;fb|name&quot;).first().text();</div><div>3、#id:通过id查找元素，比如：#logo</div><div>str=dom.select(&quot;#logo&quot;).first().text();</div><div>4、.class:通过class名称查找元素</div><div>str=dom.select(&quot;.orangelink&quot;).first().text();</div><div>5、[attribute]:利用属性查找元素，比如[href]</div><div>str=dom.select(&quot;[href]&quot;).first().text();</div><div>6、[attr=value]:利用属性值来查找元素，比如[width=500]</div><div>str=dom.select(&quot;[width=500]&quot;).first().text();</div></div><div>选择器组合使用</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>1、el#id:元素+ID 比如 div#logo</div><div>srt=dom.select(&quot;div#logo&quot;).first().text();</div><div>2、el.class:元素+class，比如：div.masthead</div><div>srt=dom.select(&quot;div.masthead&quot;).first().text();</div><div>3、el[attr]:元素+属性名,比如：a[href]</div><div>srt=dom.select(&quot;a[href]&quot;).first().text();</div><div>4、任意组合，比如：a[href].highlight</div><div>srt=dom.select(&quot;a[href].highlight&quot;).first().text();</div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">5、ancestor child:查找某个元素下子元素，比如：.body p 查找“body”下所有 p</span></div><div>srt=dom.select(&quot;div#auto-header .mini-left&quot;).first().text();</div><div>6、parent&gt;child:查找某个父元素下的直接子元素(相差一级)，比如：div.context&gt;P查找p</div><div>srt=dom.select(&quot;div.masthead&quot;).first().text();</div><div>7、parent&gt;*:查找某个父元素下的所有直接子元素</div><div>srt=dom.select(&quot;div.masthead&gt;*&quot;).first().text();</div></div><div><br/></div></span>
</div></body></html> 