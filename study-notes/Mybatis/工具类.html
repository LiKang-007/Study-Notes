<html>
<head>
  <title>工具类</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602916 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2570"/>
<h1>工具类</h1>

<div>
<span><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">package</span> <span style="color: #82e6ff;">com.utils</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><br/></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">import</span> <span style="color: #82e6ff;">jdk.internal.util.xml.impl.Input</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">import</span> <span style="color: #82e6ff;">org.apache.ibatis.io.Resources</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">import</span> <span style="color: #82e6ff;">org.apache.ibatis.session.</span><span style="color: #65dfff;">SqlSession</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">import</span> <span style="color: #82e6ff;">org.apache.ibatis.session.</span><span style="color: #65dfff;">SqlSessionFactory</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">import</span> <span style="color: #82e6ff;">org.apache.ibatis.session.SqlSessionFactoryBuilder</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><br/></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">import</span> <span style="color: #82e6ff;">java.io.IOException</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">import</span> <span style="color: #82e6ff;">java.io.InputStream</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><br/></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">public class</span> <span style="color: #82e6ff;">MyBatisUtils</span><span style="color: #ffa245; font-style: italic;">{</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">private static</span> <span style="color: #65dfff;">SqlSessionFactory</span> <span style="color: #49b0ce; font-style: italic;">factory</span>=<span style="color: #f97bb0; font-weight: bold;">null</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">static</span><span style="color: #ffa245; font-style: italic;">{</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #82e6ff;">String</span> <span style="color: #fcfcfc;">config</span>=<span style="color: #ff806c;">&quot;mybatis.xml&quot;</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">try</span><span style="color: #ffa245; font-style: italic;">{</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #82e6ff;">InputStream</span> <span style="color: #fcfcfc;">in</span>= <span style="color: #82e6ff;">Resources</span>.<span style="font-style: italic;">getResourceAsStream</span><span style="color: #ffa245; font-style: italic;">(</span><span style="color: #fcfcfc;">config</span><span style="color: #ffa245; font-style: italic;">)</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #68ff3e;">//</span><span style="color: #68ff3e; font-family: '宋体';">创建</span> <span style="color: #68ff3e;">SQLSessionFactory</span><span style="color: #68ff3e; font-family: '宋体';">对象</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #49b0ce; font-style: italic;">factory</span>=<span style="color: #f97bb0; font-weight: bold;">new</span> <span style="color: #75c2b3;">SqlSessionFactoryBuilder</span><span style="color: #ffa245; font-style: italic;">()</span>.<span style="color: #75c2b3;">build</span><span style="color: #ffa245; font-style: italic;">(</span><span style="color: #fcfcfc;">in</span><span style="color: #ffa245; font-style: italic;">)</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #ffa245; font-style: italic;">}</span><span style="color: #f97bb0; font-weight: bold;">catch</span><span style="color: #ffa245; font-style: italic;">(</span><span style="color: #82e6ff;">IOException</span> <span style="color: #fcfcfc;">e</span><span style="color: #ffa245; font-style: italic;">){</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #fcfcfc;">e</span>.<span style="color: #75c2b3;">printStackTrace</span><span style="color: #ffa245; font-style: italic;">()</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #ffa245; font-style: italic;">}</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #ffa245; font-style: italic;">}</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #68ff3e;">//</span><span style="color: #68ff3e; font-family: '宋体';">获取</span><span style="color: #68ff3e;">SqlSession</span><span style="color: #68ff3e; font-family: '宋体';">的方法</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">public static</span> <span style="color: #65dfff;">SqlSession</span> <span style="color: #75c2b3;">getSqlSession</span><span style="color: #ffa245; font-style: italic;">(){</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #65dfff;">SqlSession</span> sqlSession=<span style="color: #f97bb0; font-weight: bold;">null</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">if</span><span style="color: #ffa245; font-style: italic;">(</span><span style="color: #49b0ce; font-style: italic;">factory</span>!=<span style="color: #f97bb0; font-weight: bold;">null</span><span style="color: #ffa245; font-style: italic;">){</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #68ff3e;">//</span><span style="color: #68ff3e; font-family: '宋体';">非自动提交事务</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;">sqlSession=<span style="color: #49b0ce; font-style: italic;">factory</span>.<span style="color: #75c2b3;">openSession</span><span style="color: #ffa245; font-style: italic;">()</span>;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #ffa245; font-style: italic;">}</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #f97bb0; font-weight: bold;">return</span> sqlSession;</div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #ffa245; font-style: italic;">}</span></div><div style="background-color:rgb(41, 42, 48);color:rgb(223, 223, 224);font-family:&quot;Fira Code Medium&quot;;font-size:12pt;"><span style="color: #ffa245; font-style: italic;">}</span></div></span>
</div></body></html> 