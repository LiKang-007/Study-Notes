<html>
<head>
  <title>注解</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602916 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2448"/>
<h1>注解</h1>

<div>
<span><div><span style="font-weight: bold; color: rgb(255, 0, 0);">1、注解：Annotation</span></div><div><span style="font-weight: bold; color: rgb(255, 0, 0);">2、注解Annotation是一种引用数据类型。编译之后也是生成xxx.class文件。</span></div><div><br/></div><div><span style="font-weight: bold; color: rgb(255, 0, 0);">3、怎么自定义注解？</span></div><div><span style="font-weight: bold; color: rgb(255, 0, 0);">    【修饰符列表】@interface 注解类型名{</span></div><div><span style="font-weight: bold; color: rgb(255, 0, 0);">}</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="font-weight: bold;">public @interface MyAnnotation{</div><div style="font-weight: bold;">String value();</div><div style="font-weight: bold;">String name();//属性name</div><div style="font-weight: bold;">int age() default 25;//属性指定默认值，指定默认值之后使用该注解时可以不用给该属性赋值</div><div style="font-weight: bold;">}</div><div>public @interface MyAnnotation2{</div><div style="font-weight: bold;">String value();</div><div style="font-weight: bold;">}</div><div style="font-weight: bold;">@MyAnnotation2(&quot;hehe&quot;)</div><div style="font-weight: bold;">public class MyAnnotationTest{</div><div><b><font color="#FF0000">//如果注解中有属性，使用时必须给属性赋值。（除非该属性制定了默认值）</font></b></div><div><span style="font-size: 9pt; color: rgb(255, 0, 0); font-family: Monaco;"><b>//属性名是value并且属性只有一个时value可以省略</b></span></div><div style="font-weight: bold;">@MyAnnotation(name=&quot;属性值&quot;,value=&quot;hehe&quot;)</div><div style="font-weight: bold;">public void doSome(){}</div><div style="font-weight: bold;"><br/></div><div style="font-weight: bold;">}</div></div><div><span style="font-weight: bold;">4、注解怎么使用，用在什么地方？</span></div><div><span style="font-weight: bold;">    第一：注解使用时语法格式是：@注解类型名</span></div><div><span style="font-weight: bold;">    第二：注解可以出现在类上，属性上，方法上，变量上等。。。</span></div><div><span style="font-weight: bold;">注解 还可以出现在注解类型上</span>。</div><div><span style="color: rgb(255, 0, 0); font-weight: bold;">5、JDK内置注解</span></div><div><br/></div><div><span style="font-weight: bold; color: rgb(88, 152, 255);">    Deprecated（表示已过时）：用@Deprecated注释的程序元素，不鼓励程序员使用这样的元素，通常是因为它很危险或者存在更好的选择。</span></div><div><span style="font-weight: bold; color: rgb(88, 152, 255);">    </span></div><div>  <span style="font-weight: bold; color: rgb(255, 0, 0);">  Override 表示一个方法声明打算重写超类中的另一个方法声明。</span></div><div>    1&gt;@Override 只能注解方法。</div><div>    2&gt;@Override 是给编译器参考的，和运行阶段没有关系。</div><div>    3&gt;凡是java程序中的方法带有这个注解的，编译器都会进行编译检查，如果这个方法不是重写父类的方法，编译器会报错。</div><div><br/></div><div><br/></div><div>    SuppressWarnings    指明应该在注释元素（以及包含在改注释元素中的所有程序元素）</div><div><br/></div><div><br/></div><div><span style="font-weight: bold;">6、元注解：修饰注解的注解。</span></div><div>    常见元注解：</div><div>            <span style="font-weight: bold;">Target：标注被标注的注解可以出现在哪些位置上。</span></div><div><span style="font-weight: bold;">            @Target(value={CONSTRUCTOR,FIELD,LOCAL_VARIABLE,METHOD,PACKAGE,MODULE,PARAMETER,TYPE})</span></div><div><span style="font-weight: bold;">            Retention：标注被标注的注解最终保存在什么位置上。</span></div><div>        @Retention(RetentionPolicy.SOURCE):表示注解只被保留在java源文件中。</div><div>        @Retention(RetentionPolicy.CLASS):表示该注解被保存在class文件中</div><div>        @Retention(RetentionPolicy.RUNTIME):表示该注解被保存在class文件中并且可以被反射机制所读取到</div><div><span style="font-weight: bold;">7、关于注解属性的类型</span></div><div><img src="注解_files/Image.png" type="image/png" data-filename="Image.png"/></div><div><span style="font-weight: bold;">8、属性是一个数组</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>public @interface MyAnnotation2{</div><div>String[] name();</div><div>}</div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div>@MyAnnotation2(name={&quot;庄三&quot;,&quot;立式&quot;})</div><div>public class Other{</div><div>    //如果注解中只有一个元素，{}可以省略</div><div>    @MyAnnotation2(name=&quot;庄三&quot;)</div><div>    String a;</div><div><br/></div><div>}</div></div><div><span style="font-weight: bold; color: rgb(255, 0, 0);">9、反射注解</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">Class c=forName(&quot;java.lang.String&quot;);</font></div><div><font face="Monaco">    //判断类中是否有@MyAnnotation</font></div><div><font face="Monaco">if(c.isAnnotationPresent(MyAnnotation.class)){</font></div><div><font face="Monaco">    //获取该注解对象</font></div><div><font face="Monaco">    MyAnnotation myAnnotation= (MyAnnotation)  </font></div><div><font face="Monaco"> c.getAnnotation(MyAnnotation.class);</font></div><div><font face="Monaco">    //获取得到注解对象的属性</font></div><div><font face="Monaco">    String value=myAnnotation.value();</font></div><div><font face="Monaco"><br/></font></div><div><font face="Monaco">}</font></div></div><div><span style="font-weight: bold;">10、注解的作用</span></div><div>        需求：</div><div>                假设有这样一个注解，叫做：@ID</div><div>            这个注解只能出现在类上面，当这个类上存在这个注解的时候，要求这个类中必须出现一个 int类型的id属性。如果没有这个属性就报异常。如果有这个属性则正常执行！</div><div>        实现：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>@Target(ElementType.Type)</div><div>@Retention(RetentionPolicy.RUNTIME)</div><div>public @interface ID(</div><div>)</div><div>//自定义异常</div><div>public class HasNotPropertyException extends RuntimeException{</div><div>    public HasNotPropertyException(){}</div><div>    public HasNotPropertyException(String s){</div><div>        super(s);</div><div>    }</div><div>}</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>@ID</div><div>public class User{</div><div>    int id;</div><div>}</div><div>public class text{</div><div>    public static void main(){</div><div>        Class userClass=CLass.forName(&quot;User&quot;);</div><div>        if(userClass.isAnnotationPresent(ID.class)){</div><div>            Boolean b=false;</div><div>            Field[]fields=userClass.getDeclaredFields();</div><div>            for(Field field:fields){</div><div>                if(&quot;id&quot;.equals(field.getName())&amp;&amp;&quot;int&quot;.equals(field.getType().getSimpleName()))</div><div>                    b=true;</div><div>                    break;</div><div>            }</div><div><br/></div><div><br/></div><div>        }</div><div>        if(!b){</div><div>            throw new HasNotPropertyException(&quot;被@ID注解标注的类必须存在一个int类型的ID属性&quot;);</div><div>        }</div><div>   }</div><div>}</div></div><div><br/></div><div>注解的继承问题：</div><div><a href="https://www.cnblogs.com/grasp/p/11362118.html">https://www.cnblogs.com/grasp/p/11362118.html</a></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 