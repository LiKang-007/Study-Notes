<html>
<head>
  <title>ES入门</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602916 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5820"/>
<h1>ES入门</h1>

<div>
<span><div><span style="font-size: 14pt; font-weight: bold;"> 数据格式</span></div><div><img src="ES入门_files/Image.png" type="image/png" data-filename="Image.png"/></div><div><img src="ES入门_files/Image [1].png" type="image/png" data-filename="Image.png"/></div><div><span style="font-size: 12pt; font-weight: bold;">倒排索引</span></div><div>    关键字---》id</div><div><span style="font-size: 12pt; font-weight: bold;">正排索引</span></div><div>    id----》关键字</div><div><br/></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">一、索引操作（HTTP）</span></div><div>    <span style="font-size: 11pt; font-weight: bold;">1、创建索引</span></div><div>        对比关系型数据库，创建索引就等同于创建数据库</div><div>        在Postman中，向ES服务器发送PUT请求：http://127.0.0.1:9200/shopping</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font face="Monaco">为什么要发送put请求？</font></div><div><font face="Monaco">Get：获取索引</font></div><div><font face="Monaco">Delete：删除索引</font></div><div><font face="Monaco">Put：创建索引</font></div><div><font face="Monaco">Http请求Get，Delete、Put方法具有幂等性，可以使用；而Post方法不具备幂等性，不支持使用；</font></div><div><font face="Monaco">（幂等性：方法执行一次还是执行多次，其产生的影响是一致的）</font></div></div><div>    <span style="font-size: 11pt; font-weight: bold;">2、查看索引</span></div><div>        <span style="font-style: italic; font-weight: bold;">2、1    获取指定索引信息</span></div><div>        在Postman中，向ES服务器发送Get请求：</div><div>http://127.0.0.1:9200/指定索引名</div><div>      <span style="font-style: italic; font-weight: bold;">  2、2    获取所有索引信息</span></div><div>http://127.0.0.1:9200/_cat/indices?v</div><div>    <span style="font-size: 11pt; font-weight: bold;">3、删除索引</span></div><div>       在Postman中，向ES服务器发送Delete请求：</div><div>http://127.0.0.1:9200/指定索引名 </div><div><br/></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">二、文档操作（HTTP）</span></div><div>    <span style="font-size: 11pt; font-weight: bold;">1、创建文档</span></div><div><img src="ES入门_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>为什么创建文档只能用Post请求？</div><div>    1、因为创建文档完毕（发送请求）之后，ES服务器会返回一个关于该文档的详细信息，返回的信息每次不一致；不具备幂等性，只能使用Post请求。</div></div><div>        <span style="font-size: 11pt; font-weight: bold;">2、创建固定id的文档</span></div><div>     使用POST请求向：http://127.0.0.1:9200/shopping/_doc/指定的ID         发送JSON数据。</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>在不指定id时，ES每次会给该文档创建不同的id</div><div>在指定id之后，就可以使用PUT请求来进行创建文档了（具备了幂等性）。</div></div><div>        <span style="font-size: 11pt; font-weight: bold;">3、查询文档（主键查询）</span></div><div>    使用Get请求：</div><div>http://127.0.0.1:9200/shopping/_doc/文档id</div><div>    <span style="font-size: 11pt; font-weight: bold;">    4、全部查询（查询索引下的全部文档）</span></div><div>     使用Get请求：</div><div>http://127.0.0.1:9200/shopping/_search</div><div>        <span style="font-size: 11pt; font-weight: bold;">5、修改文档（完全覆盖）</span></div><div>    使用Put请求：</div><div>http://127.0.0.1:9200/shopping/_doc/指定id发送修改的JSON数据</div><div>      <span style="font-size: 11pt; font-weight: bold;"> </span> <span style="font-size: 11pt; font-weight: bold;">6、局部更新</span></div><div>    使用PSOT请求</div><div><a href="http://127.0.0.1:9200/shopping/_update/1001" style="color: rgb(0, 0, 0);">http://127.0.0.1:9200/shopping/_update/1</a>文档id 发送JSON数据</div><div>{</div><div>    &quot;doc&quot;:{</div><div>        &quot;title&quot;:&quot;华为&quot;</div><div>     }</div><div>}</div><div>        <span style="font-size: 11pt; font-weight: bold;">7、删除文档</span></div><div>    使用delete请求</div><div><a href="http://127.0.0.1:9200/shopping/_doc/" style="color: rgb(0, 0, 0);">http://127.0.0.1:9200/shopping/_doc/</a>指定id</div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">特殊的查询操作：（HTTP）</span></div><div>    <span style="font-size: 11pt; font-weight: bold;">1、条件查询（通过请求路径）</span></div><div>        Get请求：</div><div>        <a href="http://127.0.0.1:9200/_search?q=name:value">http://127.0.0.1:9200/_search?q=name:value</a></div><div>  <font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold;">  2、条件查询（通过请求体）</span></font></div><div>        Get请求：</div><div>        <a href="http://127.0.0.1:9200/_search">http://127.0.0.1:9200/_search</a></div><div>        请求体：</div><div>           {</div><div>            &quot;query&quot;:{</div><div>                    &quot;match&quot;:{</div><div>                        &quot;name&quot;:&quot;value&quot;</div><div>                }</div><div>            }</div><div>        }</div><div>  <span style="font-size: 11pt; font-weight: bold;">  3、全部查询（使用请求体）</span></div><div>        Get请求：</div><div>         <a href="http://127.0.0.1:9200/_search">http://127.0.0.1:9200/_search</a></div><div>        请求体：</div><div>          {</div><div>             &quot;query&quot;:{</div><div>                            &quot;match_all&quot;:{}</div><div>                    }</div><div>        }</div><div>    <span style="font-size: 11pt; font-weight: bold;">4、分页查询</span></div><div>        Get请求：</div><div>          <a href="http://127.0.0.1:9200/_search">http://127.0.0.1:9200/_search</a></div><div>        请求体：</div><div>            {</div><div>            &quot;query&quot;:{</div><div>               &quot;match_all&quot;:{}</div><div>            },&quot;from&quot;:0,</div><div>                &quot;size&quot;:2</div><div>            }</div><div>    （页码-1）*每页数据条数</div><div>  <span style="font-size: 11pt; font-weight: bold;">  5、查询文档中的特定信息</span></div><div>        Get请求：</div><div>            <a href="http://127.0.0.1/shopping/_search">http://127.0.0.1/shopping/_search</a></div><div>        请求体：</div><div>         {</div><div>               &quot;query&quot;:{</div><div>               &quot;match_all&quot;:{}</div><div>            },&quot;from&quot;:0,</div><div>                &quot;size&quot;:2,</div><div>                &quot;_source&quot;:[&quot;name1&quot;]</div><div>        }</div><div>      <span style="font-size: 11pt; font-weight: bold;">  6、查询排序</span></div><div>        Get请求：</div><div>            <a href="http://127.0.0.1/shopping/_search">http://127.0.0.1/shopping/_search</a></div><div>        请求体：</div><div>        <span style="background-color: rgb(255, 255, 254); font-size: 12px;"><span style="background-color: rgb(255, 255, 254); font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;"> {</span></span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">               </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;query&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">               </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;match_all&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{}</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">            },</span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;from&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:</span><span style="font-size: 12px; color: rgb(9, 134, 88); line-height: 18px;">0</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">,</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;size&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:</span><span style="font-size: 12px; color: rgb(9, 134, 88); line-height: 18px;">10</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">,</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;_source&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:[</span><span style="font-size: 12px; color: rgb(4, 81, 165); line-height: 18px;">&quot;name&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">],</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;sort&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                    </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;num&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                        </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;order&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:</span><span style="font-size: 12px; color: rgb(4, 81, 165); line-height: 18px;">&quot;desc&quot;</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                //根据 num排序</span></div><div>        <span style="font-size: 11pt; font-weight: bold;">7、多条件查询</span></div><div>         Get请求：</div><div>            <a href="http://127.0.0.1/shopping/_search">http://127.0.0.1/shopping/_search</a></div><div>        请求体：</div><div>      <span style="background-color: rgb(255, 255, 254); font-size: 12px;"><span style="background-color: rgb(255, 255, 254); font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">{</span></span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">            </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;query&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;bool&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                    </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;must&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:[</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                        </span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                        {</span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;match&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                            </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;name&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:</span><span style="font-size: 12px; color: rgb(4, 81, 165); line-height: 18px;">&quot;李康&quot;</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                        }},{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                             </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;match&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                            </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;id&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:</span><span style="font-size: 12px; color: rgb(4, 81, 165); line-height: 18px;">&quot;005&quot;</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                        }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                    }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                    ]</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">            }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">        }</span></div><div>    &quot;must&quot;表示条件同时成立（与），&quot;should&quot;表示（或）</div><div>    <span style="font-size: 11pt; font-weight: bold;">    8、范围查询</span></div><div>    Get请求：</div><div>            <a href="http://127.0.0.1/shopping/_search">http://127.0.0.1/shopping/_search</a></div><div>        请求体：</div><div>      <span style="background-color: rgb(255, 255, 254); font-size: 12px;"><span style="background-color: rgb(255, 255, 254); font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">{</span></span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">            </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;query&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;bool&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                    </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;must&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:[</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                        </span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                        {</span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;match&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                            </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;name&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:</span><span style="font-size: 12px; color: rgb(4, 81, 165); line-height: 18px;">&quot;李康&quot;</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                        }},{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                             </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;match&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                            </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;id&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:</span><span style="font-size: 12px; color: rgb(4, 81, 165); line-height: 18px;">&quot;009&quot;</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                        }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                    }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                    ],</span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;filter&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                        </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;range&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                            </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;num&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:{</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                                </span><span style="font-size: 12px; color: rgb(163, 21, 21); line-height: 18px;">&quot;gt&quot;</span><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">:</span><span style="font-size: 12px; color: rgb(9, 134, 88); line-height: 18px;">100</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                            }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                        }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                    }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">                }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">            }</span></div><div style="background-color: rgb(255, 255, 254); font-size: 12px; white-space: pre;"><span style="font-size: 12px; color: rgb(0, 0, 0); line-height: 18px;">        }</span></div><div>&quot;gt&quot;表示大于</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>ES在查询的时候，会进行分词操作，比如&quot;小米&quot;分为&quot;小&quot;&quot;米&quot;，在根据倒排索引去查询。</div></div><div><br/></div><div>    9、全查询（不进行分词操作）</div><div>     Get请求：</div><div>            <a href="http://127.0.0.1/shopping/_search">http://127.0.0.1/shopping/_search</a></div><div>        请求体：{</div><div>                    &quot;query&quot;:{</div><div>                        &quot;match_phrase&quot;:{</div><div>                            &quot;name1&quot;:&quot;value1&quot;</div><div>                        }</div><div>                    }</div><div>                }</div><div>    10、高亮查询</div><div>      Get请求：</div><div>            <a href="http://127.0.0.1/shopping/_search">http://127.0.0.1/shopping/_search</a></div><div>        请求体：{</div><div>                    &quot;query&quot;:{</div><div>                        &quot;match_phrase&quot;:{</div><div>                            &quot;name1&quot;:&quot;value1&quot;</div><div>                        }</div><div>                    },&quot;highlight&quot;:{</div><div>                            &quot;fields&quot;:{</div><div>                                &quot;name2&quot;:{}</div><div>                            }</div><div>                        }</div><div>                }</div><div>        <span style="font-size: 11pt; font-weight: bold;">11、聚合查询</span></div><div>    Get请求：</div><div>            <a href="http://127.0.0.1/shopping/_search">http://127.0.0.1/shopping/_search</a></div><div>        请求体：{</div><div>            &quot;aggs&quot;:{    //聚合操作</div><div>                &quot;price_group&quot;:{    //统计结果名称，随意起名</div><div>                    &quot;terms&quot;:{    //分组</div><div>                        &quot;field&quot;:&quot;price&quot;    //分组字段（字段需要是关键字类型）</div><div>                    }</div><div>                }</div><div>            },</div><div>            &quot;size&quot;:0    //表示不显示原始数据</div><div>        }</div><div>        <span style="font-size: 11pt; font-weight: bold;">12、对字段求平均值</span></div><div>    Get请求：</div><div>            <a href="http://127.0.0.1/shopping/_search">http://127.0.0.1/shopping/_search</a></div><div>        请求体：{</div><div>            &quot;aggs&quot;:{    //聚合操作</div><div>                &quot;price_avg&quot;:{    //统计结果名称，随意起名</div><div>                    &quot;avg&quot;:{    //平均值</div><div>                        &quot;field&quot;:&quot;price&quot;    //分组字段</div><div>                    }</div><div>                }</div><div>            },</div><div>            &quot;size&quot;:0    //表示不显示原始数据</div><div>        }</div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">映射关系：</span></div><div>    在创建索引的时候，给请求体写入映射关系</div><div><img src="ES入门_files/Image [3].png" type="image/png" data-filename="Image.png"/></div><div>&quot;type&quot;表示类型，其中值为&quot;text&quot;表示文本数据，可以被分词，</div><div>                                  值为&quot;keyword&quot;表示关键字，不能被分词。</div><div>&quot;index&quot;表示是否被索引，值为&quot;false&quot;，表示不能被索引，不能被查询。</div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">Java API操作</span></div><div>    ES是通过java语言开发的，所以也可以通过java API的方式对ES服务进行访问。</div><div><br/></div><div>创建Maven项目</div><div><br/></div><div>增加依赖</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;dependencies&gt;</div><div>    &lt;dependency&gt;</div><div>        &lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;</div><div>        &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;</div><div>        &lt;version&gt;7.14.0&lt;/version&gt;</div><div>    &lt;/dependency&gt;</div><div>  &lt;!--ES客户端--&gt;</div><div>    &lt;dependency&gt;</div><div>        &lt;groupId&gt;org.elasticsearch.client&lt;/groupId&gt;</div><div>        &lt;artifactId&gt;elasticsearch-rest-high-level-client&lt;/artifactId&gt;</div><div>        &lt;version&gt;7.14.0&lt;/version&gt;</div><div>    &lt;/dependency&gt;</div><div>    &lt;dependency&gt;</div><div>        &lt;groupId&gt;junit&lt;/groupId&gt;</div><div>        &lt;artifactId&gt;junit&lt;/artifactId&gt;</div><div>        &lt;version&gt;4.8.2&lt;/version&gt;</div><div>        &lt;scope&gt;test&lt;/scope&gt;</div><div>    &lt;/dependency&gt;</div><div>    &lt;!--log4j2--&gt;</div><div>    &lt;dependency&gt;</div><div>        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;</div><div>        &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;</div><div>        &lt;version&gt; 2.14.1&lt;/version&gt;</div><div>    &lt;/dependency&gt;</div><div>    &lt;dependency&gt;</div><div>        &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;</div><div>        &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;</div><div>        &lt;version&gt;2.14.1&lt;/version&gt;</div><div>    &lt;/dependency&gt;</div><div>&lt;/dependencies&gt;</div></div><div><br/></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>//创建ES客户端</div><div>RestHighLeveClient esClient=new RestHighLeveClient(RestClient.builder(new HttpHost(&quot;localhost&quot;,9200,&quot;http&quot;)));</div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><br/></div><div>//关闭ES客户端</div><div>esClient.close();</div><div><br/></div></div><div><br/></div><div>创建索引</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>//创建ES客户端</div><div>RestHighLeveClient esClient=new RestHighLeveClient(RestClient.builder(new HttpHost(&quot;localhost&quot;,9200,&quot;http&quot;)));</div><div><br/></div><div>//创建索引</div><div>CreateIndexRequest request=new CreateIndexRequest(&quot;user&quot;);</div><div><br/></div><div>CreateIndexResponse createIndexResponse=esClinent.indices().create(request,RequestOptions.DEFAULT);//RequestOptions.DEFAULT是默认的请求配置</div><div><br/></div><div><br/></div><div><br/></div><div>//关闭ES客户端</div><div>esClient.close();</div></div><div><br/></div><div>javaAPI操作：</div><div><a href="https://github.com/LiKang-007/ES_basic-operation.git"><span>    </span>https://github.com/LiKang-007/ES_basic-operation.git</a></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 