<html>
<head>
  <title>Maven管理多模块应用</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602916 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3357"/>
<h1>Maven管理多模块应用</h1>

<div>
<span><div><span style="font-size: 12pt; font-weight: bold;">业务背景：</span></div><div><img src="Maven管理多模块应用_files/Image.png" type="image/png" data-filename="Image.png" style="color: unset; font-family: unset; font-size: unset;"/></div><div><span style="font-size: 12pt; font-weight: bold;">使用Maven管理以上的结构：</span></div><div>    Maven管理多模块应用的实现是互联网项目中多使用分布式开发，那么每个独立的服务都会使用独立的项目进行维护，这样就需要多模块应用管理，来实现项目的高度统一。</div><div> <font style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">   </span><span style="font-size: 12pt; font-weight: bold;">1、第一种实现方式</span></font></div><div>            项目名称：maven-modules-project</div><div>            完成功能：使用IDEA完成 Maven管理多模块的应用开发</div><div>        </div><div>   <span style="font-weight: bold;"> </span><span style="font-weight: bold;">指定父工程：</span></div><div>      <span style="font-weight: bold;"> </span> <span style="color: rgb(54, 101, 238); font-weight: bold;">Maven父工程必须遵循一下两点要求：</span></div><div>            <span style="font-weight: bold;">1、packaging标签的文本内容必须设置为pom</span></div><div><span style="font-weight: bold;">            2、把src目录删除掉</span></div><div>        注：1、package标签的作用是指定打包的方式：</div><div>               默认为jar，如果pom文件没有指定package标签，那么       默认就是jar。</div><div>                2、<span style="color: rgb(227, 0, 0); font-weight: bold;">pom文件是项目对象模型（Project Object Module），该文件是可以被继承的。Maven多模块管理其实就是让它的子模块的pom文件继承父工程的pom文件。</span></div><div>        具体步骤：</div><div>                第一步：创建空项目</div><div>                第二步：创建父工程</div><div>                        第一步：创建一个Maven工程</div><div>                        第二步：设置pom文件package标签为pom</div><div>                        第三步：删除src目录</div><div>               第三步：创建子工程</div><div>                        ----&gt;New module</div><div>                        ----&gt;Parent (指定父工程)</div><div>                        ----&gt;指定ArtfactId(保持唯一性)</div><div><br/></div><div>    子模块创建完成后,它的pom文件中会含有：</div><div>        &lt;parent&gt;标签,该标签下的&lt;relativaPath&gt;标签指定的是父工程的pom文件的相对路径</div><div>        &lt;modelVersion&gt;标签</div><div>        &lt;artifactId&gt;标签</div><div><span style="font-weight: bold;">     要是创建的时候没有指定父工程，之后可以指定:</span></div><div>        设置&lt;parent&gt;标签</div><div>            &lt;parent&gt;</div><div>                &lt;groupId&gt;&lt;/groupId&gt;</div><div>                &lt;version&gt;&lt;/version&gt;</div><div>                &lt;artifactId&gt;&lt;/artifactId&gt;</div><div>                &lt;relativePath&gt;&lt;/relativePath&gt;</div><div>            &lt;parent&gt;</div><div>        </div><div><span style="font-weight: bold;">  第一种方式：</span></div><div>            子模块继承父工程所有依赖。（父工程添加的依赖，所有的子模块会无条件的去继承<span style="font-size: unset; color: unset; font-family: unset;">）</span></div><div><span style="font-size: unset; color: unset; font-family: unset;">      <span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">缺点：冗余：</span></span></div><div><span style="font-size: unset;"><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">      改进：父工程要加强管理子模块的所有依赖                </span></span></div><div><span style="font-size: unset;"><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">      实现：将父工程里的所有依赖添加到</span></span></div><div><span style="font-size: unset;"><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">        &lt;depenencyManagement&gt;标签下</span></span></div><div><span style="font-size: unset;"><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">                子模块需要声明需要继承的依赖:</span></span></div><div><span style="font-size: unset;"><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">                    添加&lt;groupId&gt;</span></span><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">&lt;/groupId&gt;</span></div><div><span style="font-size: unset;"><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">                           &lt;artfactId&gt;</span></span><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">&lt;/artfactId&gt;</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">                注意：如果子模块指定依赖的版本号，那就不会去继承父工程的依赖</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">        父工程管理依赖的版本号</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">            通常管理依赖版本号的标签名名称由：项名名称+字段version组成</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">    &lt;properties&gt;</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">            &lt;junit-version&gt;4.10&lt;/junit-version&gt;</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">    &lt;/properties&gt;</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">    &lt;dependencyManagement&gt;</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">            &lt;dependencies&gt;</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">                &lt;groupId&gt;junit&lt;/groupId&gt;</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">                &lt;artifactId&gt;junit&lt;/artifactId&gt;</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">                &lt;version&gt;${junit-version}&lt;/version&gt;</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">            &lt;/dependencies&gt;</span></div><div><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">    </span><span style="font-size: unset; color: unset; font-family: unset; font-weight: bold;">&lt;/dependencyManagement&gt;</span></div><div><span style="font-size: unset;"><br/></span></div><div><span style="font-size: unset;"><br/></span></div><div><span style="font-weight: bold;">第二种方式：</span></div><div><span style="font-weight: bold;">  将工程添加到父工程里面</span></div><div><span style="font-weight: bold;">    第一步：创建父工程</span></div><div><span style="font-weight: bold;">    第二步：创建子工程</span></div><div><span style="font-weight: bold;">            Add as module to--&gt;父工程</span></div><div><span style="font-weight: bold;">            Parent---------------&gt;父工程</span></div><div><span style="font-weight: bold;"><img src="Maven管理多模块应用_files/Image [1].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-weight: bold;">    这种方式：</span></div><div><span style="font-weight: bold;">        1、子项目的&lt;parent&gt;标签下不会有</span><span style="font-weight: bold;">&lt;relativaPath&gt;标签，因为子工程和父工程的pom文件在同一级目录。</span></div><div><span style="font-weight: bold;">        2、父工程的pom文件中会有一个&lt;modules&gt;标签,用来表示父工程包含的所有子模块(并不会去添加它的孙子模块)。</span></div><div><span style="font-weight: bold;">        &lt;modules&gt;</span></div><div><span style="font-weight: bold;">            &lt;module&gt;子项目名&lt;/module&gt;</span></div><div><span style="font-weight: bold;">        &lt;/modules&gt;</span></div><div><br/></div><div><span style="font-weight: bold;">子工程会继承父工程的编译插件；</span></div><div><br/></div><div><span style="font-weight: bold;">第三种方式：第一种和第二种方式的混合使用。</span></div><div><span style="font-weight: bold;"><img src="Maven管理多模块应用_files/Image [2].png" type="image/png" data-filename="Image.png"/></span></div><div>第二种方式：</div><div><span style="font-weight: bold;">                    &lt;modules&gt;</span></div><div><span style="font-weight: bold;">                        &lt;module&gt;子项目名&lt;/module&gt;</span></div><div><span style="font-weight: bold;">                   &lt;/modules&gt;</span></div><div><span style="font-weight: bold;">    就是聚合关系，聚合关系目的是为了快速的构建项目，（继承是为了简化依赖的书写）</span><span style="font-weight: bold;">&lt;module&gt;子项目名&lt;/module&gt;下的项目会自动构建。</span></div><div><span style="font-weight: bold;">    继承和聚合都需要 父工程是pom工程。</span></div><div><span style="font-weight: bold;"><br/></span></div><div><span style="font-weight: bold;"><br/></span></div><div><span style="font-weight: bold;"><br/></span></div><div><b><font style="font-size: 14pt;">注意：</font></b></div><div><b><span>    </span></b><span style="background-color: #292a30; color: #f97bb0; font-family: 'Fira Code Medium'; font-size: 12.0pt; font-weight: bold;">dependencyManagement 只是声明依赖，并不会引入。因此在pom工程中有些依赖如果本地仓库中没有，idea则会显示爆红（爆红表示本地仓库中没有该jar包），如果有子项目应用该依赖，才会从网络下载。</span></div><div><b><br/></b></div><div><b><br/></b></div></span>
</div></body></html> 