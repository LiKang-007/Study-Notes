<html>
<head>
  <title>JDBC编程六步</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602916 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1869"/>
<h1>JDBC编程六步</h1>

<div>
<span><div>第一步：注册驱动；（作用：告诉java程序，即将连接的是哪种数据库）</div><div>//java.sql.Driver 是JDK中的接口,com.mysql.jdbc.Driver()是xxx.jar</div><div>//中的实现类</div><div>java.sql.Driver driver=new com.mysql.jdbc.Driver();</div><div>DriverManager.registerDriver(driver);</div><div>第二步： 获取连接；（表示JVM的进程和数据库进程之间的通道打开了，属于进程间的通信，用完一定要关闭）</div><div><br/></div><div>第三步：获取数据库操作对象；（专门执行sql语句的对象）</div><div><br/></div><div>第四步；执行SQL语句；</div><div>            //jdbc中sql语句不需要分号结尾</div><div>            //增删改用executeUpdate 返回值为int 是影响数据库中的记录条数</div><div>            //查用executeQuery 返回值为结果集</div><div>第五步；处理查询结果集；（只有当第四步执行的是select语句，才需要执行第五步）</div><div><br/></div><div>第六步：释放资源；</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>public class JDBC{</div><div>    public static void main(String[] args){</div><div>            Connection conn=null；</div><div>            Statement stmt=null;</div><div>        try{</div><div>            //1、注册驱动</div><div>           Driver driver=new com.mysql.jdbc.Driver();</div><div>           DriverManager.registerDriver(driver);</div><div>            //2、获取连接</div><div>    //bjpowernode是数据库名</div><div>  String url =&quot;jdbc:mysql://127.0.0.1:3306/bjpowernode&quot;;</div><div>  String user=&quot;root&quot;;</div><div>  String password=&quot;333&quot;;  </div><div>  Connection conn=DriverManager.getConnection(url,user,password);</div><div>            //3、获取数据库操作对象</div><div>            statement stmt =conn.createStatement();</div><div><br/></div><div>            //4、执行sql（插入）</div><div>            String sql=&quot;insert into dept(depeno,dname,loc) values(50,'人事部'，北京)&quot;;</div><div>              // excuteUpdate专门执行DML语句（insert delete  update），返回值为int，是影响数据库中的记录条数</div><div>             int count=stmt.executeUpdate(sql);</div><div>        }catch(SQLException e){</div><div>           e.printStackTrace();</div><div>             }finally{</div><div>                //为了保证资源一定释放，在finally语句块中释放，并且由小到大释放</div><div>                //6、释放资源</div><div>                try{</div><div>                    if(stmt!=null){</div><div>                            stmt.close();</div><div>                        }</div><div>                  }catch(SQlException e){</div><div>                     e.printStackTrace();                </div><div>                }</div><div>                try{</div><div>                    if(conn!=null){</div><div>                            conn.close();</div><div>                        }</div><div>                  }catch(SQlException e){</div><div>                     e.printStackTrace();                </div><div>                }</div><div>           }</div><div>        </div><div>    }</div><div><br/></div><div>}</div></div><div style="font-size: 14px; overflow-wrap: break-word; margin-bottom: 15px; text-indent: 2em; zoom: 1; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>//JDBC完成 delete</div><div>1.注册驱动</div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">2.获取连接</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">3.获取数据库操作对象</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">4.执行SQl语句</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">5.处理查询结果集</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">6.释放资源</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;"><br/></span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">Connection conn =null;</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">Statement stmt=null;</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">try{</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">        DriverManage.registerDriver(new com.mysql.jdbc.Driver());</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">        conn=DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/bjpownode&quot;,&quot;root&quot;,&quot;333&quot;);</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">        stmt=conn.createStatement();</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">        String sql=&quot;de&quot;;</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">}catch(SqLException e){</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">    e.printStackTrace();</span></div><div><span style="font-size: 9pt; color: rgb(51, 51, 51); font-family: Monaco;">}</span></div></div><div style="font-size: 14px; overflow-wrap: break-word; margin-bottom: 15px; text-indent: 2em; zoom: 1; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 14px;">//查询操作</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>//将连接数据库的所有信息配置到配置文件中</div><div>public class JDBC{</div><div>    public static void main(String[] args){</div><div>        //使用资源绑定器绑定属性配置文件（先在文件中添加一个xxx.properties配置文件）</div><div>            //jdbc是配置文件名</div><div>            ResourceBundle bundle=ResourceBundle.getBundle(&quot;jdbc&quot;);</div><div>            String driver=bundle.getString(&quot;driver&quot;);</div><div>            String url=bundle.getString(&quot;url&quot;);</div><div>            String user=bundle.getString(&quot;user&quot;);</div><div>            String password=bundle.getString(&quot;password&quot;);</div><div><br/></div><div><br/></div><div>            Connection conn=null；</div><div>            Statement stmt=null;</div><div>            ResultSet rs=null;</div><div>        try{</div><div>            //1、注册驱动</div><div>         Class.forName(driver);</div><div>            //2、获取连接</div><div>    //bjpowernode是数据库名</div><div>  Connection conn=DriverManage.getConnection(url,user,password);</div><div>            //3、获取数据库操作对象</div><div>            statement stmt =conn.createStatement();</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>            //4、执行sql（查询）</div><div>            String sql=&quot;select empno，ename，sal from emp&quot;;</div><div>              // excuteUpdate专门执行DML语句（insert delete  update），返回值为int，是影响数据库中的记录条数</div><div>            rs=stmt.executeQuery(sql);</div><div>            //5.处理查询结果集</div><div>               boolean bol= rs.next();//行</div><div>                while(bol){</div><div>                //注意，jdbc中所有下标从1开始，不是从零开始</div><div>                //rs.getString(1); //表示取出第一列数据，以String的方式  </div><div>                //列名称不是原表中的列名称，是查询结果集中的列名称。</div><div>                rs.getString(列名);                </div><div>}</div><div>        }catch(SQLException e){</div><div>           e.printStackTrace();</div><div>             }finally{</div><div>                //为了保证资源一定释放，在finally语句块中释放，并且由小到大释放</div><div>                //6、释放资源</div><div>                try{</div><div>                    if(rs!=null){</div><div>                            rs.close();</div><div>                        }</div><div>                  }catch(SQlException e){</div><div>                     e.printStackTrace();                </div><div>                }</div><div>                try{</div><div>                    if(stmt!=null){</div><div>                            stmt.close();</div><div>                        }</div><div>                  }catch(SQlException e){</div><div>                     e.printStackTrace();                </div><div>                }</div><div>                try{</div><div>                    if(conn!=null){</div><div>                            conn.close();</div><div>                        }</div><div>                  }catch(SQlException e){</div><div>                     e.printStackTrace();                </div><div>                }</div><div>           }</div><div>        </div><div>    }</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>}</div></div><div style="font-size: 14px; overflow-wrap: break-word; margin-bottom: 15px; text-indent: 2em; zoom: 1; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><br/></div></span>
</div></body></html> 